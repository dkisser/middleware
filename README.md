# midware
> 项目中主要面向三个方面，分别是数据库、工具、服务器。

## chameleon
> 主要针对数据库进行二次开发。针对目前比较流行的数据库分库、分表等设计进行封装，目的是让客户端
开发人员能进可能快的进行业务开发，屏蔽底层数据源的切换以及数据汇总的工作。

### 数据库分库
> 目前使用的是HikuraCP连接池实现的多数据源之间的切换，并通过AOP来拦截所有数据库操作，实现读写
分离。

#### 目前缺陷

* 拦截配置尚不支持配置
* 分表功能尚未实现

## prettydog
> 提供各种丰富的工具类。目前提供的工具主要包括缓存类、SPI机制、分布式流水以及日志工厂

### 缓存

* 分代缓存
> 将缓存分为新生代与老年代，将命中率高的缓存放入新生代，将不常用缓存放入老年代。在一次GC过后
便清空老年代。该缓存可用于统计活跃度。(因为老年代会在GC过后失效，所以在该缓存中的值可以认为是
热点值)。目前实现方式采用ConCurrentHashMap+WeakHashMap。使用该方式的缺点便是在新生代满了
之后再往里面放入缓存时会将目前的所有新生代放入缓存，在一次GC过后便会释放。该操作可能会导致缓
存的命中率变低。使用时需注意这个地方的缓存失效的情况。

* 软可及缓存
> 缓存的value为软引用。故在内存不足时可以自动释放缓存，防止OOM。通过ReferenceQueue保存了
所有被GC掉的缓存。该类缓存在系统内存不足的时候可能出现频繁的缓存失效，但是却不会让应用程序因
为OOM而被Kill。且若是当前系统内存不足时，所有对缓存的操作将会变慢，因为需要频繁的出队入队。

### SPI
> 针对目前大量涉及采用微内核的情况，封装了一套spi。同时该spi也支持自动包装，对于微内核的应
用较为方便

### 日志适配工厂
> 目前市面上日志框架较多，这里提供一个统一的日志工厂去兼容这些日志框架。通过这个日志工厂能实
现日志框架的可拔插，只需要设定启动参数便可将日志原有日志框架替换或升级。同时对于业务开发人员
来说，这些改变将会被屏蔽。

## TinyCat
> 针对于第三方进行数据传输的场景设计。采用微内核富插件的方式设计，平等对待自定义扩展功能与内部
核心功能。支持TCP、Http数据传输，同时可自由切换内核。若是较为了解该系统，可以零侵入的修改系统
功能，且对已有业务改动较小
